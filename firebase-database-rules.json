{
  "rules": {
    "$participant_id": {
      "// Authentication required for reads and writes": "",
      ".read": "auth != null",
      ".write": "auth != null",
      
      "// Validate config structure": "",
      "config": {
        ".validate": "newData.hasChildren(['participant_id', 'num_objects', 'num_blickets', 'rule', 'num_rounds'])"
      },
      
      "// Validate comprehension data": "",
      "comprehension": {
        ".validate": "newData.hasChildren(['action_history', 'phase'])"
      },
      
      "// Validate games data": "",
      "games": {
        "$game_id": {
          ".validate": "newData.hasChildren(['phase', 'interface_type'])"
        }
      },
      
      "// Validate main game data": "",
      "main_game": {
        "$round_id": {
          ".validate": "newData.hasChildren(['phase', 'round_number'])"
        }
      }
    },
    
    "// Block all anonymous access at root": "",
    ".read": false,
    ".write": false
  }
}

